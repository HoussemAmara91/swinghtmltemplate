#documentation for rev13

= Что это такое =

swinghtmltemplate позволяет конструировать формы с помощью декларативного описания на языке разметки, похожей на html.

Разметка формы располагается во внешнем файле .html, во время выполнения приложения она подгружается в программу и преобразуется в swing-компонент. При этом имеется возможность присвоить дочерние элементы html документа (текстовые поля, панели итп) полям некоторого класса с помощью аннотации @Bind.


= Как это работает =

Загрузка html документа происходит с помощью библиотеки jdom, таким образом html должен быть валидным xml документом.
Далее DOM-модель xml-документа преобразуется в дерево тегов, готовых для преобразования в компоненты swing. По получившейся dom-модели тегов строится дерево swing-компонент.

= Использование =
Загрузить dom-модель можно с помощью вызова 
{{{
InputStream in = ...;
DomModel model = DomLoader.loadModel(in);
}}}

Для построения дерева swing компонент необходимо вызвать метод 
{{{
DomConverter.toSwing(model);
}}}

далее из dom-модели необходимо получить корневой элемент, у которого можно извлечь соответствующий компонент:
{{{
model.getRootTag().getComponent();
}}}

корневой элемент соответствует тегу body в html документе.
Также из модели можно получить любой компонент по его id:
{{{
model.getTagById("someId");
}}}

== Автоматический биндинг ==
Можно автоматически подгрузить форму для некого объекта, представляющего контроллер формы, и присвоить полям объекта требуемые элементы:
{{{
package foo;

public class LoginForm {

   @Bind("login")
   private JTextField loginText;

   public LoginForm() {
        try {
            Binder.bind(this);
        } catch (JDOMException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

   }

}
}}}
Binder.bind(this) подгружает html документ, располагающийся в том же месте, где и класс контроллера формы и имеющий такое же имя (то есть для примера выше это будет "/foo/LoginForm.html").

Аннотация @Bind("id") указывает на то, что данному полю в качестве значения будет присвоен компонент, соответствующий тегу с идентификатором "id".